<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<style type="text/css">
table.news td {
	border-top: solid thin black;
}

table.news tr {
	vertical-align: top;
}

table.news tr td.section {
	font-size: 20px;
	font-weight: bold;
}

table.news tr td.title {
	vertical-align: top;
	width: 30%;
	font-weight: bold;
}

table.news tr td.content {
	vertical-align: top;
	width: 70%;
}
</style>
<title>Graphiti &quot;New and Noteworthy&quot;</title>
<link href="book.css" rel="stylesheet" type="text/css">
</head>

<body>

	<h1>Graphiti &quot;New and Noteworthy&quot; for Eclipse Luna SR2</h1>
	<p>Last revised February 03, 2015</p>
	<p>This document describes the new development topics that were
		addressed during the milestones towards the release 0.11.2 within the
		Luna release train.</p>
	<!-- --------------------------------- Table ----------------------------------------- -->
	<table border="0" cellpadding="10" cellspacing="0" class="news"
		width="600">
		<!-- ---------------------------------------- SR2 ------------------------------ -->
		<tr>
			<td colspan="2">
				<h2>SR2</h2>
			</td>
		</tr>
		<tr id="bug 458465">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=458465">Bug
					458465</a></td>
			<td class="content">A bug in finding the child shape in a
				container has been fixed. In case of shapes that were sent to back,
				a wrong shape might have been returned.</td>
		</tr>
		<tr id="bug 450993">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=450993">Bug
					450993</a></td>
			<td class="content">A bug in the arrangement of the speed
				buttons (context buttons) has been fixed.</td>
		</tr>
		<tr id="bug 449384">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=449384">Bug
					449384</a></td>
			<td class="content">A bug that caused the print feature to
				freeze on Linux machines has been fixed.</td>
		</tr>
		<!-- ---------------------------------------- SR1 ------------------------------ -->
		<tr>
			<td colspan="2">
				<h2>SR1</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this version has been set on
				bugfixing.</td>
		</tr>
		<tr id="bug 437933">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=437933">Bug
					437933</a></td>
			<td class="content">A potential NullPointerExecption in the
				method isDirty() in DefaultPersistencyBehavior has been fixed.</td>
		</tr>
		<tr id="bug 436601">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=436601">Bug
					436601</a></td>
			<td class="content">A potential race condition in the save logic
				of DiagramEditor has been fixed. It could have caused erroneous
				update and refresh behaviors in the editor that are hard to track
				down.</td>
		</tr>
		<tr id="bug 439689">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=439689">Bug
					439689</a></td>
			<td class="content">A bug that caused invisible elements to be
				selected has been fixed.</td>
		</tr>
		<tr id="bug 440796">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=440796">Bug
					440796</a></td>
			<td class="content">A bug that caused incorrect notifications on
				changing the rotation attribute of <i>AbstractText</i> has been
				fixed.
			</td>
		</tr>
		<!-- ---------------------------------------- RC2 ------------------------------ -->
		<tr>
			<td colspan="2">
				<h2>RC2</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing.</td>
		</tr>
		<tr id="bug 433650">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=433650">Bug
					433650 </a></td>
			<td class="content">A bug causing that the Diagram Editor was
				not marked as saved after save has been fixed.</td>
		</tr>
		<tr id="bug 435515">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=435515">Bug
					435515 </a></td>
			<td class="content">The left-over build properties for
				jre.compilation that still referred to Java 1.5 were removed.</td>
		</tr>
		<!-- ---------------------------------------- RC1 ------------------------------ -->
		<tr>
			<td colspan="2">
				<h2>RC1</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing.</td>
		</tr>
		<tr id="bug 434436">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=434436">Bug
					434436 </a></td>
			<td class="content">A bug causing the highlighting of anchors
				not to work has been fixed. It is now possible to set the background
				color on hover for anchors.</td>
		</tr>
		<tr id="bug 434458">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=434458">Bug
					434458 </a></td>
			<td class="content">A bug causing the color decorators of
				connections not to work has been fixed. It is now possible to
				decorate connections with <i>ColorDecorators</i>.
			</td>
		</tr>
		<tr id="bug 434684">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=434684">Bug
					434684 </a></td>
			<td class="content">A bug that prevented the update of the
				diagram for an open editor has been fixed. Now it is possible to
				update an editor with a new diagram on refresh of the editor.</td>
		</tr>
		<!-- ---------------------------------------- M7 ------------------------------- -->
		<tr>
			<td colspan="2">
				<h2>M7</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing.</td>
		</tr>
		<tr id="bug 408725">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=408725">Bug
					408725 </a></td>
			<td class="content">Renaming the Graphiti project from
				modeling.gmp.graphiti to modeling.graphiti has been finalized. The
				rename was needed because of the elimination of all container
				projects in the modeling project. For Graphiti the former container
				project GMP has been deleted; Graphiti is now i direct subproject of
				the modeling main project. This change affected the name of the Git
				repository, Wiki locations, build job names and our Bugzilla
				component. For details see the bug.</td>
		</tr>
		<tr id="bug 412858">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=412858">Bug
					412858 </a></td>
			<td class="content">An error in the update feature handling has
				been found that can only be fixed in a potentially incompatible way.
				In some situations the method <i>canUpdate</i> was not consulted
				before calling the method <i>updateNeeded</i>. In order not to break
				any existing tools relying on the current erroneous behavior, only a
				first step to fix this bug was undertaken. From now on a Eclipse
				error log entry will be written whenever a tool returns false on <i>canUpdate</i>
				but returns a <i>true</i> update reason for calling <i>updateNeeded</i>.
				This allows tool to continue to use their current implementation
				until the actual bug in the Graphiti framework will be fixed in the
				next development cycle for Eclipse Mars (probably Graphiti 0.12.0).
				More detail on the fix and the error message can be found in the
				linked Bugzilla (the fix is described in <a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=412858#c3">comment
					3</a>, the error message in <a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=412858#c4">comment
					4</a>).
			</td>
		</tr>
		<tr id="bug 416039">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=416039">Bug
					416039 </a></td>
			<td class="content">The rendering in styled texts did not fall
				back to the font settings used in the text object itself in case no
				special font has been set for the styled text.</td>
		</tr>
		<tr id="bug 424020">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=424020">Bug
					424020 </a></td>
			<td class="content">A potential infinite loop in the create
				connection functionality has been fixed. It was caused by returning
				<i>true</i> for the method <i>canStartConnection</i> on the diagram.
			</td>
		</tr>
		<tr id="bug 430609">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=430609">Bug
					430609 </a></td>
			<td class="content">A bug in the EMF transaction handling in
				Graphiti has been fixed that could cause an EMF Transactions
				IllegalStateException has been fixed. In some rare situations the
				framework tried to execute a feature without starting a transaction
				although no transaction was active.</td>
		</tr>
		<tr id="bug 430687">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=430687">Bug
					430687 </a></td>
			<td class="content">Any subclasses of <i>DefaultUpdateBehavior</i>
				were not able to access the diagram input in the method <i>createEditingDomain</i>.
				This has been fixed by introducing an additional parameter for the
				input to an additional <i>createEditingDomain</i> method, so this
				change will not affect any existing tools already overriding this
				method.
			</td>
		</tr>
		<tr id="bug 432681">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=432681">Bug
					432681 </a></td>
			<td class="content">Inconsistencies in the Graphiti Git
				repository regarding new lines and settings for new files regarding
				new lines has been fixed. Until now both Windows and UNIX line
				endings were mixed.</td>
		</tr>
		<!-- ---------------------------------------- M6 ------------------------------- -->
		<tr>
			<td colspan="2">
				<h2>M6</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing and implementing round-offs.</td>
		</tr>
		<tr id="bug 423573">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=423573">Rotation
					angle is more precise</a></td>
			<td class="content">The <i>angle</i> attribute that was used for
				rotation of text graphics algorithms was stored as an integer which
				lead to rounding issues and imprecise rendering. The <i>angle</i>
				attribute has been deprecated and replaced by a <i>rotation</i>
				attribute of type double. The framework internally cares about
				compatibility with old diagrams by reading the old <i>angel</i>
				attribute and storing it in the <i>rotation</i> attribute. Both <i>getAngle()</i>
				and <i>getRotation()</i> methods on the graphics algorithms return
				the value of the <i>rotation</i> field (in case of <i>getAngle()</i>
				rounded to integer).
			</td>
		</tr>
		<tr id="bug 427444">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=427444">More
					flexibility in DefaultUpdateBehavior</a></td>
			<td class="content">Clients are now more flexible in how they
				can influence the update behavior by overriding <i>DefaultUpdateBehavior</i>:
				the update adapter caring about updating to new file contents can
				now be changed by clients. Also two bugs in the registration of the
				update adapter (duplicate registration for initial resources) and
				only reacting to the deletion of the first diagram in a resource to
				close the editor were fixed.
			</td>
		</tr>
		<tr id="bug 428068">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=428068">Unselecting
					a connection tool in palette</a></td>
			<td class="content">It is now possible to de-select a connection
				creation tool the editor palette. The new method <i>isStayActiveAfterExecution(IConnectionCreationToolEntry)</i>
				was added to the <i>IToolBehaviorProvider</i> interface. The default
				is as <i>true</i> as it was before.
			</td>
		</tr>
		<tr id="bug 424636">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=424636">Bug
					424636</a></td>
			<td class="content">This fixes a bug in <i>DiagramEditorActionBarContributor</i>
				that appeared in RCP applications when the <i>org.eclipse.ui.export</i>
				functionality is not available. The contributor tried to add the
				Graphiti save as image menu entry right after the Eclipse export
				entry which caused an <i>IllegalArgumentException</i> in case it was
				not available. The situation is now checked and the entry is only
				added in case we find the location. Clients may override the new
				method <i>addSaveAsImageEntryToMenu()</i> to define their own
				location for the menu entry.
			</td>
		</tr>
		<tr id="bug 429215">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=429215">Bug
					429215</a></td>
			<td class="content">A potential <i>NullPointerException</i> in <i>DefaultMarkerBehavior</i>
				has been fixed. I could happen in case a not correctly initialized
				editor was closed.
			</td>
		</tr>
		<!-- ---------------------------------------- M5 ------------------------------- -->
		<tr>
			<td colspan="2">
				<h2>M5</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing and implementing round-offs.</td>
		</tr>
		<tr id="bug 401792">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=401792">Disable
					reconnection</a></td>
			<td class="content">It is now possible to completely disable the
				reconnection feature in Graphiti. When that is done the user is not
				even allowed to start dragging on an anchor. So far it was only
				possible to prevent the drop operation.
			</td>
		</tr>
		<tr id="bug 425750">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=425750">Bug
					425750 </a></td>
			<td class="content">A bug in the selection changing feature has
				been fixed.
			</td>
		</tr>
		<!-- ---------------------------------------- M4 ------------------------------- -->
		<tr>
			<td colspan="2">
				<h2>M4</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing and implementing round-offs.</td>
		</tr>
		<tr id="bug 391046">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=391046">Bug
					391046 </a></td>
			<td class="content">A bug that might have caused deadlocks while
				saving a Graphiti diagram has been fixed.
			</td>
		</tr>
		<tr id="bug 421612">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=421612">Bug
					421612 </a></td>
			<td class="content">Graphiti now uses its own Hudson instance
				(HIPP) at Eclipse.
			</td>
		</tr>
		<tr id="bug 421754">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=421754">Bug
					421754 </a></td>
			<td class="content">A bug in the calculation of the absolute
				position of a shape has been fixed. The calculation returned a wrong
				position in case the shape was nested inside an inactive container.
			</td>
		</tr>
		<tr id="bug 421813">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=421813">Bug
					421813 </a></td>
			<td class="content">A bug in the calculation of the relative
				position of a shape has been fixed. The calculation returned a wrong
				position in case the shape was nested inside an inactive container.
			</td>
		</tr>
		<!-- ---------------------------------------- M3 ------------------------------- -->
		<tr>
			<td colspan="2">
				<h2>M3</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing and implementing round-offs.</td>
		</tr>
		<tr id="bug 402760">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=402760">Documentation
					for Diagrams in Views and Popups</a></td>
			<td class="content">The Graphiti documentation now has a chapter
				on the Diagrams in Views and Popups functionality introduced in
				Graphiti 0.10.0.</td>
		</tr>
		<tr id="bug 418409">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=418409">Bug
					418409 </a></td>
			<td class="content">The Graphiti new sample project and sample
				diagram wizards are available again in the Eclipse new wizards
				popup. They had disappeared in M2.
			</td>
		</tr>
		<tr id="bug 418676">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=418676">Bug
					418676 </a></td>
			<td class="content">A bug has been fixed that caused that <i>canUndo()</i>
				was not called in the feature or pattern has been fixed.
			</td>
		</tr>
		<!-- ---------------------------------------- M2 ------------------------------- -->
		<tr>
			<td colspan="2">
				<h2>M2</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing and implementing round-offs.</td>
		</tr>
		<tr id="bug 323356">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=323356">Mouse
					wheel support for scrolling and zooming</a></td>
			<td class="content">Graphiti now supports the use of the mouse
				wheel for scrolling and zooming inside diagrams.</td>
		</tr>
		<tr id="bug 415888">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=415888"><i>DiagramEditorInput</i>
					adapts to <i>IResource</i></a></td>
			<td class="content">The <i>DiagramEditorInput</i> object now
				supports calls to the method <i>getAdapter(...)</i> passing an <i>IResource.class</i>
				object and returns the underlying Eclipse resource in case it can be
				retrieved.
			</td>
		</tr>
		<tr id="bug 414437">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=414437">Bug
					414437 </a></td>
			<td class="content">Fixed a bug that caused the zoom animation
				to jump in some cases.</td>
		</tr>
		<tr id="bug 414954">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=414954">Bug
					414954 </a></td>
			<td class="content">Fixed a wrong link on the Graphiti web page
				to the online documentation and the New and Noteworthy documents.</td>
		</tr>
		<tr id="bug 415884">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=415884">Bug
					415884 </a></td>
			<td class="content">Fixed a bug in the size calculation for
				texts that are placed into multi text graphics algorithms. Line
				breaks and other special characters were not counted correctly, e.g.
				did not increase the needed height.</td>
		</tr>
		<tr id="bug 416419">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=416419">Bug
					416419 </a></td>
			<td class="content">Fixed a wrong return value in
				DiagramBehavior; getAdapter to IDiagramEditor returned the behavior
				instance.</td>
		</tr>
		<tr id="bug 416708">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=416708">Bug
					416708 </a></td>
			<td class="content">Fixed a bug in the <i>IdPattern</i> that
				might cause direct editing not to get active in certain situations.
			</td>
		</tr>
		<tr id="bug 417577">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=417577">Bug
					417577 </a></td>
			<td class="content">Fixed a bug that caused that the state
				callback were not called while creating a connection and using the
				drag new connection functionality.</td>
		</tr>
		<tr id="bug 418333">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=418333">Bug
					418333 </a></td>
			<td class="content">Graphiti now needs Java 1.6 as minimal
				supported runtime, since the Equinox Core plugins require that
				version as well in Luna M2. Running the Graphiti framework on top of
				Java 1.5 is no longer possible. <b>Note that this is an
					incompatible change.</b>
			</td>
		</tr>
		<!-- ---------------------------------------- M1 ------------------------------- -->
		<tr>
			<td colspan="2">
				<h2>M1</h2>
			</td>
		</tr>
		<tr>
			<td colspan="2">The main focus for this milestone has been set
				on bugfixing and implementing round-offs.</td>
		</tr>
		<tr id="bug 403664">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=403664">Double
					click feature for diagrams</a></td>
			<td class="content">It is now possible for clients to register a
				double click feature also on diagram level. Until now that was only
				possible on concrete shapes.</td>
		</tr>
		<tr id="bug 412838">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=412838">Hook
					to check read-only state of EMF resource</a></td>
			<td class="content">It is now possible for clients to override a
				hook method for checking if any of the EMF resources used in the
				editor is read-only. Until now having a resource contained in the
				platform itself (e.g. EMF core) loaded in the editor caused an
				exception while trying to save.</td>
		</tr>
		<tr id="bug 413139">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=413139">Convert
					image to bytes service</a></td>
			<td class="content">Clients may now use a Graphit service method
				that converts an image into a byte array. The functionality was up
				to now hidden in the save as image feature.</td>
		</tr>
		<tr id="bug 403622">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=403622">Bug
					403622 </a></td>
			<td class="content">Tests that were disabled for dependency
				issues between Eclipse Kepler and SWTBot are now enabled again.</td>
		</tr>
		<tr id="bug 411891">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=411891">Bug
					411891 </a></td>
			<td class="content">Fixed a dependency bug so that the Graphiti
				SDK can now be installed into Eclipse Juno.</td>
		</tr>
		<tr id="bug 412877">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=412877">Bug
					412877 </a></td>
			<td class="content">Fixed a bug that caused reconnection
				features not to appear on the undo/redo stack in some cases.</td>
		</tr>
		<tr id="bug 413166">
			<td class="title"><a
				href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=413166">Bug
					413166 </a></td>
			<td class="content">Fixed a bug that caused DiagramEditorDummy
				not to return the editing domain.</td>
		</tr>
	</table>
	<!-- ---------------------------------------- END OF TABLE ------------------------------- -->
	<p>&nbsp;</p>
</body>

</html>
